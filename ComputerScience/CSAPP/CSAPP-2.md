# CSAPP章节小结

## 第二章 信息表示

- **大端小端**
大多Intel架构采用小端
int 0x01234567
地址从低到高：
大端：01 23 45 67
小端：67 45 23 01

- **布尔代数**
C中的布尔运算：
与& 或| 非~ 异或^

- **移位**
对于左移：逻辑移位与算术移位都是补0
对于右移：
逻辑移位在高位补0，用于无符号数
算术移位在高位补原先最高位，用于有符号数

- **补码**
认为最高二进制位为负权，以非负为界各分一半
考虑8位二进制
01111111 =  127
10000000 = -128
即 -128~-1 0~127

- **有符号数与无符号数转换**
涉及到长度与符号转换：先转大小，再转符号
转换不改变位模式 仅改变数字解读方式
C语言默认数字为有符号数，末尾加u关键字来声明无符号数
在算数运算/关系运算中同时涉及无符号数与有符号数，隐式强转为unsigned

- **截断运算**
假设截断保留k位，则对十进制下对原数字mod(2^k)
考虑二进制数10011 = 1+2+16 = 19
截断保留3为 19mod8 = 3 = 011

- **乘法与移位**

```C
x = x * 14
x = x * (2**3+2**2+2*1)
x = (x<<3) + (x<<2) + (x<<1)
```

- **二进制小数**
  小数V = (-1)^S * M *2^E
  Sign决定正负
  尾数M:是一个二进制小数
  阶码Expoent :阶码

  **浮点表示：**
  单精度 32位 float
  <1位sign><8位exp><23位frac>
  双精度 64位 double
  <1位符号位><11位exp><52位frac>
  记Bias = 2^(k-1)-1
  **编码格式**
  - exp全为0 非规格化
  frac = M
  E = Exp - Bias,
  Exp = E + Bias;
  - exp全为1 特殊值
  - exp不全为0,1 规格化
  frac = M-1 ，默认1开头，把表示1的位省去
  E = 1-Bias

- **舍入**
  整数除法:向0舍入
  浮点数：向偶数舍入
  右移：向下舍入

  向偶数舍入：找中间值
  X101~X111:向上舍入
  X001~X011:向下舍入
  X100 :正好在中间，向0舍入，让舍入后最低位为0

# 关于OS的一些补充

## 系统启动与磁盘分区

当计算机加电启动后，首先存在于主板ROM中的BIOS(Basic I/O System)会执行硬件自检。结束后，启动第一顺位存储设备，这通常是硬盘。  

硬盘启动后，寻找它的主引导记录MBR(Master Boot Record)，它是一段引导代码，作用是检查分区表是否正确。分区即CDEF盘，第一个分区被标记为活动分区(C盘，过去还有AB盘)作为系统盘。  

每个分区都存在一个引导块(分区引导记录)，它的目的是装在该分区内的操作系统。为了统一设计，通常每个分区都会存在一个引导块。但没有装载系统的分区该部分为空。该部分将被载入内存并执行以寻找bootloader，并随后启动。不同系统的bootloader的实现不同。  

操作系统内核被bootloader载入到内存，随后控制权正式转交给内核，至此系统成功启动。

## 关于文件与目录系统和索引节点与文件根目录

- 索引节点：
  其思想是专门弄一个结点用来保存当前文件所在的所有物理块。当文件特别大，物理块特别多，我们需要多级索引。
  一个文件对应了一个索引节点，索引节点在硬盘上，索引节点使用iNode号来标示自己。
  一个文件系统能支持多大文件，除了存储空间的限制，也对应iNode经过了多级索引后最大的表示的空间。

- 一个文件系统的构建是硬盘的格式化完成的。在硬盘经过分区后就可以进行逻辑格式化，创建文件系统的根目录，iNode表。
  这些内容并不是OS初始化(开机载入)时完成的，而是已经写好在磁盘里了。